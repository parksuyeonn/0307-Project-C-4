<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="root"></div>
  <img id="img">
  <script>
    const root = document.getElementById('root'); //id = 'root' 인 div 태그를 객체로 가져옴
    const img = document.getElementById('img'); // id ='img'인 img 태그를 객체로 가져옴.
    const xhr = new XMLHttpRequest();  //XML 객체 생성.
    const buttonCreate = document.createElement('button');

    root.appendChild(buttonCreate);
    root.children[0].style.width="300px";
    root.children[0].style.height="300px";
    
    const value = Math.floor((Math.random()*1010)) +1
  
    const _URL = `https://pokeapi.co/api/v2/pokemon/${value}`;
    
    xhr.open('GET', _URL);  
    xhr.send(); 
    xhr.addEventListener('load', function() {
    
      fetch(_URL).then((response)=> response.json()).then((data)=>{img.src=data.sprites.front_default})
    })


    root.children[0].addEventListener('click',()=>{
    const value = Math.floor((Math.random()*1010)) +1
  
    const _URL = `https://pokeapi.co/api/v2/pokemon/${value}`;
    
    xhr.open('GET', _URL);  //open 힘수(초기화)를 통해 서버에 전달값 설정. (get 메서드로 URL에 전달 할거다.)
    xhr.send(); // 서버에 전달 요청
    xhr.addEventListener('load', function() {
    
      fetch(_URL).then((response)=> response.json()).then((data)=>{img.src=data.sprites.front_default})

      

    })
  })
   //root.children[0].addEventListener 안에 들어 있는 식이랑  본문에 들어 있는 식이랑 겹치는 이유는, 화면을 load 했을 때 보여지는 포켓몬이 있어야 하기 떄문( 본문에 들어 있는 식이 없으면, 화면이 load 될 때는 포켓몬이 나오지 않고, 버튼을 눌러야 나옴.)
  </script>
</body>
</html>
